<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reviews - Red Chill Restaurant</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="main/main.css">
  <link rel="stylesheet" href="main/responsive.css">
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
      <a class="navbar-brand fw-bold" href="index.html">RED CHILL RESTAURANT</a>
    </div>
  </nav>

  <!-- Reviews Section -->
  <main class="container" style="padding-top:90px;">
    <h2 class="text-center mb-4">Customer Reviews</h2>

    <!-- Review Form -->
    <div class="card p-3 shadow-sm mb-4">
      <h5>Post Your Review</h5>
      <form id="reviewForm">
        <input type="text" id="reviewName" class="form-control mb-2" placeholder="Your Name" required>
        <textarea id="reviewText" class="form-control mb-2" placeholder="Write your review..." required></textarea>
        <input type="file" id="reviewPhoto" class="form-control mb-2" accept="image/*">
        <button type="submit" class="btn btn-primary w-100">Post Review</button>
      </form>
    </div>

    <!-- Display Reviews -->
    <div id="reviewList" class="list-group"></div>
  </main>

  <!-- Footer -->
  <footer class="bg-dark text-white text-center p-3 mt-5">
    <p>&copy; 2025 Red Chill Restaurant. All Rights Reserved.</p>
  </footer>

  <script>
    // Load saved reviews
    const reviewList = document.getElementById("reviewList");
    let reviews = JSON.parse(localStorage.getItem("reviews")) || [];

    function renderReviews() {
      reviewList.innerHTML = reviews.map(r => `
        <div class="list-group-item">
          <strong>${r.name}</strong><br>
          <p>${r.text}</p>
          ${r.photo ? `<img src="${r.photo}" class="img-fluid rounded mb-2" style="max-height:200px;">` : ""}
          <small class="text-muted">${r.date}</small>
        </div>
      `).join("");
    }
    renderReviews();

    // Add new review
    document.getElementById("reviewForm").addEventListener("submit", e => {
      e.preventDefault();
      const name = document.getElementById("reviewName").value;
      const text = document.getElementById("reviewText").value;
      const photoInput = document.getElementById("reviewPhoto");

      if (!name || !text) return;

      let photoData = "";
      if (photoInput.files[0]) {
        const reader = new FileReader();
        reader.onload = function(event) {
          photoData = event.target.result;
          saveReview(name, text, photoData);
        };
        reader.readAsDataURL(photoInput.files[0]);
      } else {
        saveReview(name, text, "");
      }
    });

    function saveReview(name, text, photo) {
      const newReview = {
        name,
        text,
        photo,
        date: new Date().toLocaleString()
      };
      reviews.unshift(newReview);
      localStorage.setItem("reviews", JSON.stringify(reviews));
      renderReviews();
      document.getElementById("reviewForm").reset();
    }
  </script>
</body>
</html>
